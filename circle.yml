dependencies:
    cache_directories:
        - "~/.opam"
    override:
        - sudo add-apt-repository -y ppa:avsm/ppa
        - sudo apt-get update -y
        - sudo apt-get install -y ocaml ocaml-native-compilers opam
        - opam init --auto-setup # Modify dotfiles
        - opam switch 4.02.3
        - eval `opam config env`
        - opam update

test:
    override:
        - opam pin add -y reason .
        - make test
        - git diff --exit-code
